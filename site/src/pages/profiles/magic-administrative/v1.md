---
layout: "layout.html:main"
title: "MAGIC Administration Version 1 | Profiles"
---
# MAGIC Administration (v1)

> [!IMPORTANT] 
> Pre-publication links for reviewers:
> #### Definition
> - [Content JSON Schema](https://gist.github.com/felnne/307bfa81672fbac2cd9cd7dd632a410c#file-20-schema-content-v1-json)
> - [Encoding JSON Schema](https://gist.github.com/felnne/307bfa81672fbac2cd9cd7dd632a410c#file-20-schema-encoding-v1-json)
> #### Examples
> - [content model (minimal)(JSON)](https://gist.github.com/felnne/307bfa81672fbac2cd9cd7dd632a410c#file-30-example-content-min-json)
> - [content model (complete)(JSON)](https://gist.github.com/felnne/307bfa81672fbac2cd9cd7dd632a410c#file-30-example-content-all-json)
> - [content encoding (JSON)](https://gist.github.com/felnne/307bfa81672fbac2cd9cd7dd632a410c#file-30-example-encoding-json)
> - content encoding (XML) - **Unavailable**
> - [Test Keys](https://github.com/antarctica/lantern/blob/main/docs/dev.md#test-records)

## About

<details>
<summary>Details</summary>
<p>Title: 'British Antarctic Survey (BAS) Mapping and Geographic Information Centre (MAGIC) Administrative Metadata Profile'</p>
<p>Edition: 1</p>
<p>Revision: 2025-10-22</p>
<p>Licence: <a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/">Open Government Licence</a></p>
</details>

<details>
<summary>People</summary>
<p>Authors:</p>
<ul><li><a href="https://orcid.org/0000-0003-3703-3888">Felix Fennell (MAGIC)</a></li></ul>
<p>Contributors:</p>
<ul><li><a href="https://orcid.org/0000-0003-0960-0486">Louise Ireland (MAGIC)</a></li></ul>
</details>

{% include 'toc.html' %}

> [!NOTE]
> Terms including 'MUST', 'SHOULD', 'MAY' etc. are used according to [RFC 2119](https://datatracker.ietf.org/doc/html/rfc2119).

## Rational

The ISO 19115 information model and the open, non-verifiable, nature of discovery metadata are not sufficient to meet 
MAGIC's needs for managing resources administratively, including:

- ensuring administrative information is not accessible to external users
- ensuring the integrity and trustworthiness of administrative information can be verified
- ensuring access constraints are captured in sufficient detail, as MAGIC routinely handles sensitive, licensed or otherwise restricted information
- ensuring references to internal systems are not visible to end-users, as such information MUST NOT be accessible to unintended audiences

In essence, this profile aims to compliment discovery metadata with additional, targeted, information needed for 
internal administration, held within ISO 19115 records.

## Base standard

Not Applicable.

## Related profiles

In most cases, records will also follow the [MAGIC Discovery](/profiles/magic-discovery/latest) profile.

## Definition

This profile consists of two parts:

1. the structure of administrative metadata ([Content Model](#content-model-specification))
2. the method for storing administrative metadata ([Encoding](#encoding-specification))

### JSON Schemas

> [!IMPORTANT]
> These are preemptive links.

- [Content Model](https://metadata-resources.data.bas.ac.uk/bas-metadata-generator-configuration-schemas/v2/magic-admin-content-v1.json)
- [Encoding](https://metadata-resources.data.bas.ac.uk/bas-metadata-generator-configuration-schemas/v2/magic-admin-encoding-v1.json)

## Examples

> [!IMPORTANT]
> These are preemptive links.

- content model (minimal) [JSON](https://github.com/antarctica/metadata-library/blob/v0.16.0/tests/resources/configs/magic-administrative/minimal_content_v1.json)
- content model (complete) [JSON](https://github.com/antarctica/metadata-library/blob/v0.16.0/tests/resources/configs/magic-administrative/complete_content_v1.json)
- minimal record encoding:
    - [JSON](https://github.com/antarctica/metadata-library/blob/v0.16.0/tests/resources/configs/magic-administrative/minimal_record_v1.json) (BAS ISO 19115 schema)
    - [XML](https://github.com/antarctica/metadata-library/blob/v0.16.0/tests/resources/records/magic-administrative/minimal_record_v1.xml) (ISO 19139)

> [!NOTE]
> Encoded administrative metadata has been intentionally encrypted and signed using shared insecure 
> [Test Keys](https://github.com/antarctica/lantern/blob/v0.5.0/docs/dev.md#test-records-signing-keys), to allow 
> anyone to decode their contents.

## Content model specification

### Overview

> [!NOTE]
> This section is informative only.
> 
> The content model is authoritatively defined by the content model [JSON Schema](#json-schemas). 

| Property                         | Name                                      | Type   | Format   |
|----------------------------------|-------------------------------------------|--------|----------|
| `$schema`                        | [Schema](#schema)                         | String | URI      |
| `id`                             | [ID](#id)                                 | String | URI      |
| `gitlab_issues`                  | [GitLab issues](#gitlab-issues)           | Array  | -        |
| `gitlab_issues.*`                | GitLab issue                              | String | URI      |
| `access_permissions`             | [Access permissions](#access-permissions) | Array  | -        |
| `access_permissions.*`           | Access permission                         | Object | -        |
| `access_permissions.*.directory` | Directory identifier                      | String | -        |
| `access_permissions.*.group`     | Group identifier                          | String | -        |
| `access_permissions.*.expiry`    | Expires at                                | String | Datetime |
| `access_permissions.*.comments`  | Comments                                  | String | -        |

> [!NOTE]
> These properties do not form part of the ISO 19115 information model.

### Properties

#### Schema

As defined by the JSON Schema [`$schema`](https://json-schema.org/draft/2020-12/json-schema-core#section-8.1.1) property.

Distinguishes different versions of the MAGIC Administrative Metadata content model.

This property value MUST be set to `https://metadata-resources.data.bas.ac.uk/bas-metadata-generator-configuration-schemas/v2/magic-admin-v1.json`.

#### ID

Distinguishes administrative metadata instances.

This property MUST relate administrative metadata to wider discovery metadata for the described resource.

This property value MUST therefore be set to the `file_identifier` discovery metadata value for the described resource.

#### GitLab issues

Non-public information, history and/or context captured in GitLab issues about the resource.

This property CAN be used with issues from any GitLab instance.

> [!WARNING]
> This property MUST NOT be used for issues from any other systems (such as GitHub) to ensure URLs are in a known format.

#### Access permissions

Groups within a directory that have access to the resource, optionally limited in duration and/or explained via a 
free-text comment. 

SHOULD be used by data access systems as a source of truth to configure access permissions. The `comments` sub-property 
MUST NOT be used by any system to configure permissions.

The `directory` and `group` sub-properties MAY use identifiers from an identity provider, or aliases for such 
identifiers where these are mutually understood by different systems.

See [Appendix 2](#appendix-2-minimum-supported-access-permissions) for aliases systems MUST support.

## Encoding specification

### Overview

Administrative metadata MUST be:

1. encoded as a JSON string
1. added to a JSON Web Token ([JWT](https://datatracker.ietf.org/doc/html/rfc7519)) using a `pyd` 
  [Private Claim](https://datatracker.ietf.org/doc/html/rfc7519#section-4.3)
1. encrypted using JSON Web Encryption ([JWE](https://datatracker.ietf.org/doc/html/rfc7516))

I.e.:

```
[JWE]
  └── [JWT]
        └── ['pyd'] (private claim)
              └── [Administrative Metadata content model instance as JSON string]
```

The outer JWE ensures administrative metadata is not accessible to external users (via encryption), whilst the inner 
JWT allows the integrity and trustworthiness of administrative information to be verified (via signing).

The JWE MUST be contained in [Discovery Metadata](#discovery-metadata) for the described resource.

### JWT claims

Administrative Metadata JWTs MUST contain these claims:

| Claim | Name     | Definition                                                              | Value                                  |
|-------|----------|-------------------------------------------------------------------------|----------------------------------------|
| `pyd` | Payload  | -                                                                       | *JSON encoded administrative metadata* |
| `iss` | Issuer   | [RFC 7519](https://datatracker.ietf.org/doc/html/rfc7519#section-4.1.1) | `magic.data.bas.ac.uk`                 |
| `aud` | Audience | [RFC 7519](https://datatracker.ietf.org/doc/html/rfc7519#section-4.1.3) | `data.bas.ac.uk`                       |
| `exp` | Expiry   | [RFC 7519](https://datatracker.ietf.org/doc/html/rfc7519#section-4.1.4) | *100 years from point of issue*        |

> [!NOTE]
> JWTs typically use a short expiry time for prevent long-lived credentials. These tokens are not used for credentials 
> or an identity, and are intentionally long-lived (for the lifetime of the resource).

Administrative Metadata JWTs MAY contain these claims:

| Claim | Name       | Definition                                                              | Value                                                  |
|-------|------------|-------------------------------------------------------------------------|--------------------------------------------------------|
| `sub` | Subject    | [RFC 7519](https://datatracker.ietf.org/doc/html/rfc7519#section-4.1.2) | *Related record file identifier and admin metadata ID* |
| `nbf` | Not before | [RFC 7519](https://datatracker.ietf.org/doc/html/rfc7519#section-4.1.5) | *Point of issue*                                       |
| `iat` | Issued at  | [RFC 7519](https://datatracker.ietf.org/doc/html/rfc7519#section-4.1.6) | *Point of issue*                                       |

### JWT signing key

JWTs MUST be signed using the private 
[MAGIC Administrative Metadata Signing Key](#appendix-3-magic-administrative-metadata-signing-key).

JWTs MUST be verified using the related public key.

### JWE encryption key

JWEs MUST be encrypted using the public key derived from the 
[MAGIC Administrative Metadata Encryption Key](#appendix-4-magic-administrative-metadata-encryption-key).

JWEs MUST be decrypted using the related private Key.

### Discovery metadata

> [!NOTE]
> This subsection is informative only. It is authoritatively defined by the encoding [JSON Schema](#json-schemas). 

The JWE value MUST be:

- contained in a JSON encoded key-value object under an 'administrative_metadata' key
- set as the [Supplemental Information](https://www.datypic.com/sc/niem21/e-gmd_supplementalInformation-1.html) element
- in discovery metadata for the described resource

This discovery metadata MUST also include:

- the file identifier element, using a value that is unique across all records
- a domain consistency data quality element:
  - as per [Appendix 1 - Domain Consistency Element](#appendix-1-domain-consistency-element)
  - stating the record complies with this profile (for validation tools to determine whether a record uses this profile)

I.e.:

```
[Discovery Metadata]
├── [File Identifier]
├── [Identification]
│         └── [Supplemental Information]
│             └── [JWE]
│                 └── ...
└── [Data Quality]
    └── [Domain Consistency]
```

> [!TIP]
> The supplemental information key-value object MAY contain additional keys as desired.

### Reference implementations

> [!IMPORTANT]
> These are provisional links.

The [`get_admin`](https://github.com/antarctica/lantern/blob/v0.4.0/src/lantern/lib/metadata_library/models/record/utils/admin.py#L103) 
and [`set_admin`](https://github.com/antarctica/lantern/blob/v0.4.0/src/lantern/lib/metadata_library/models/record/utils/admin.py#L122) 
methods, and their [associated documentation](https://github.com/antarctica/lantern/blob/v0.4.0/docs/libraries.md#record-administrative-metadata), 
form a reference implementation using Python.

## Appendices

### Appendix 1 - Domain Consistency Element

```json
{
	"specification": {
		"dates": {
			"publication": "2025-10-22"
		},
		"edition": "1",
		"title": {
			"value": "British Antarctic Survey (BAS) Mapping and Geographic Information Centre (MAGIC) Administration Metadata Profile",
			"href": "https://metadata-standards.data.bas.ac.uk/profiles/magic-administration/v1/"
		},
		"contact": {
			"organisation": {
				"name": "Mapping and Geographic Information Centre, British Antarctic Survey",
				"href": "https://ror.org/01rhff309",
				"title": "ror"
			},
			"phone": "+44 (0)1223 221400",
			"address": {
				"delivery_point": "British Antarctic Survey, High Cross, Madingley Road",
				"city": "Cambridge",
				"administrative_area": "Cambridgeshire",
				"postal_code": "CB3 0ET",
				"country": "United Kingdom"
			},
			"email": "magic@bas.ac.uk",
			"online_resource": {
				"href": "https://www.bas.ac.uk/teams/magic",
				"title": "Mapping and Geographic Information Centre (MAGIC) - BAS public website",
				"description": "General information about the BAS Mapping and Geographic Information Centre (MAGIC) from the British Antarctic Survey (BAS) public website.",
				"function": "information"
			},
			"role": [
				"publisher"
			]
		}
	},
	"explanation": "Resource within scope of British Antarctic Survey (BAS) Mapping and Geographic Information Centre (MAGIC) Administrative Metadata Profile.",
	"result": true
}
```

### Appendix 2 - Minimum supported access permissions

#### Open Access

Grants anyone anywhere access to information (i.e. unrestricted and anonymous access).

Used for information intended for public release or that does not otherwise need to be restricted.

| Property                         | Value     | Meaning                              |
|----------------------------------|-----------|--------------------------------------|
| `access_permissions.*.directory` | `*`       | Representing any directory           |
| `access_permissions.*.group`     | `~public` | Representing the opposite of private |

#### BAS Staff access

Grants any BAS staff member access to information, excluding wider UKRI staff.

> [!warning]
> This access permission is underpinned by a dynamic group controlled by UKRI. This group's composition criteria are 
> not known, and it is not guaranteed to exclusively contain BAS staff.

Used for information that is restricted internally within BAS (only).

| Property                         | Value        | Meaning                    |
|----------------------------------|--------------|----------------------------|
| `access_permissions.*.directory` | `*`          | Representing any directory |
| `access_permissions.*.group`     | `~bas-staff` | Representing all BAS staff |

### Appendix 3 - MAGIC Administrative Metadata Signing Key

Public JSON Web Key (JWK):

```json
{
	"kty":"EC",
	"kid":"magic_metadata_signing_key",
	"alg":"ES256",
	"crv":"P-256",
	"x":"Ksei1ZoTIBRQrJZeNRzdch9910T7hqKjRSqq0wkNxRQ",
	"y":"SykdLryiLm3xNHEiC_OYmB6jzaU1ZtyRv8WfxMIRdJ4"
}
```

> [!NOTE]
> Private key material for this key is available by contacting [MAGIC](mailto:magic@bas.ac.uk).

### Appendix 4 - MAGIC Administrative Metadata Encryption Key

Public JSON Web Key (JWK):

```json
{
	"kty":"EC",
	"kid":"magic_metadata_encryption_key",
	"alg":"ECDH-ES+A128KW",
	"crv":"P-256",
	"x":"n_SWT2v7lyte0Kgdozc8CO_cJNEjW-s7cRR3plMK_wo",
	"y":"e2TioKjehKX_IgGHZ-Zl0q70jv6cANHWToHWQ507e5U"
}
```

> [!NOTE]
> Private key material for this key is available by contacting [MAGIC](mailto:magic@bas.ac.uk).
