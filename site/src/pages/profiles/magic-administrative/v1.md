---
layout: "layout.html:main"
title: "MAGIC Administration Version 1 | Profiles"
---
# MAGIC Administration (v1)

## About

<details>
<summary>Details</summary>
<p>Title: 'British Antarctic Survey (BAS) Mapping and Geographic Information Centre (MAGIC) Administration Metadata Profile'</p>
<p>Edition: 1</p>
<p>Revision: 2025-10-22</p>
<p>Licence: <a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/">Open Government Licence</a></p>
</details>

<details>
<summary>People</summary>
<p>Authors:</p>
<ul><li><a href="https://orcid.org/0000-0003-3703-3888">Felix Fennell</a></li></ul>
<p>Contributors:</p>
<ul><li><a href="https://orcid.org/0000-0003-0960-0486">Louise Ireland</a></li></ul>
<p>Reviewers:</p>
<ul><li><a href="https://orcid.org/0009-0007-0389-8935">Jonathan Dawe</a></li></ul>
</details>

{% include 'toc.html' %}

> [!NOTE]
> Terms including 'MUST', 'SHOULD', 'MAY' etc. are used according to [RFC 2119](https://datatracker.ietf.org/doc/html/rfc2119).

## Rational

The ISO 19115 information model and the open, non-verifiable, nature of discovery metadata are not sufficient to meet 
MAGIC's needs for managing resources administratively, including:

- ensuring administration information is not accessible to external users
- ensuring the integrity and trustworthiness of administration information can be verified
- ensuring access constraints are captured in sufficient detail, as MAGIC routinely handles sensitive, licensed or otherwise restricted information
- ensuring references to internal systems are not visible to end-users, as such information MUST NOT be accessible to unintended audiences

In essence, this profile aims to compliment discovery metadata with additional, targeted, information needed for 
internal administration, held within ISO 19115 records.

## Base standard

Not Applicable.

## Related profiles

In most cases, records will also follow the [MAGIC Discovery](/profiles/magic-discovery/latest) profile.

## Definition

This profile consists of two parts:

1. the structure of administration metadata ([Content Model](#content-model-specification))
2. the method for storing administration metadata ([Encoding](#encoding-specification))

### JSON Schemas

> [!IMPORTANT]
> Pre-publication links for reviewers:
> 
> - [Content Model](https://metadata-resources-testing.data.bas.ac.uk/bas-metadata-generator-configuration-schemas/v2/magic-administration-content-v1.json)
> - [Encoding](https://metadata-resources-testing.data.bas.ac.uk/bas-metadata-generator-configuration-schemas/v2/magic-administration-encoding-v1.json)

- [Content Model](https://metadata-resources.data.bas.ac.uk/bas-metadata-generator-configuration-schemas/v2/magic-administration-content-v1.json)
- [Encoding](https://metadata-resources.data.bas.ac.uk/bas-metadata-generator-configuration-schemas/v2/magic-administration-encoding-v1.json)

## Examples

> [!IMPORTANT]
> Pre-publication links for reviewers:
> 
> - content model (minimal)
>     - [JSON](https://github.com/antarctica/metadata-library/blob/main/tests/resources/configs/magic-administration-profile_content/minimal_v1.json)
> - content model (complete)
>     - [JSON](https://github.com/antarctica/metadata-library/blob/main/tests/resources/configs/magic-administration-profile_content/all_v1.json)
> - minimal record encoding:
>     - [JSON](https://github.com/antarctica/metadata-library/blob/main/tests/resources/configs/magic-administration-profile_encoding/minimal_v1.json) (BAS ISO 19115 schema)
>     - [XML](https://github.com/antarctica/metadata-library/blob/main/tests/resources/records/magic-administration/minimal_v1-record.xml) (ISO 19139)

- content model (minimal)
    - [JSON](https://github.com/antarctica/metadata-library/blob/v0.16.0/tests/resources/configs/magic-administration-profile_content/minimal_v1.json)
- content model (complete)
    - [JSON](https://github.com/antarctica/metadata-library/blob/v0.16.0/tests/resources/configs/magic-administration-profile_content/all_v1.json)
- minimal record encoding:
    - [JSON](https://github.com/antarctica/metadata-library/blob/v0.16.0/tests/resources/configs/magic-administration-profile_encoding/minimal_v1.json) (BAS ISO 19115 schema)
    - [XML](https://github.com/antarctica/metadata-library/blob/v0.16.0/tests/resources/records/magic-administration/minimal_v1-record.xml) (ISO 19139)

> [!IMPORTANT]
> Pre-publication links for reviewers:
>
> https://github.com/antarctica/metadata-library/blob/main/docs/dev.md#test-keys

> [!NOTE]
> Encoded administration metadata has been intentionally encrypted and signed using shared insecure 
> [Test Keys](https://github.com/antarctica/metadata-library/blob/v0.16.0/docs/dev.md#test-keys), to allow 
> anyone to decode their contents.

## Content model specification

### Overview

> [!NOTE]
> This section is informative only.
> 
> The content model is authoritatively defined by the content model [JSON Schema](#json-schemas). 

> [!NOTE]
> These properties do not form part of the ISO 19115 information model.
| Property               | Name                                          | Type   | Format                                    | Obligation | Occurrence |
|------------------------|-----------------------------------------------|--------|-------------------------------------------|------------|------------|
| `$schema`              | [Schema](#schema)                             | String | URI                                       | Mandatory  | 1          |
| `id`                   | [ID](#id)                                     | String | URI                                       | Mandatory  | 1          |
| `gitlab_issues`        | [GitLab Issues](#gitlab-issues)               | Array  | -                                         | Optional   | 0..*       |
| `metadata_permissions` | [Metadata Permissions](#metadata-permissions) | Array  | [Access Permissions](#access-permissions) | Mandatory  | 0..*       |
| `resource_permissions` | [Resource Permissions](#resource-permissions) | Array  | [Access Permissions](#access-permissions) | Mandatory  | 0..*       |

Where [GitLab issues](#gitlab-issues) are defined as:

| Property | Name         | Type   | Format   | Obligation | Occurrence |
|----------|--------------|--------|----------|------------|------------|
| `*`      | GitLab issue | String | URI      | Mandatory  | 1          |

Where [Access permissions](#access-permissions) are defined as:

| Property      | Name                                     | Type   | Format   | Obligation | Occurrence |
|---------------|------------------------------------------|--------|----------|------------|------------|
| `*`           | Access permission                        | Object | -        | Mandatory  | 1          |
| `*.directory` | Directory identifier                     | String | -        | Mandatory  | 1          |
| `*.group`     | Group identifier                         | String | -        | Mandatory  | 1          |
| `*.expiry`    | Expires at                               | String | Datetime | Mandatory  | 1          |
| `*.comment`   | Comment                                  | String | -        | Optional   | 0..1       |

### Properties

#### Schema

As defined by the JSON Schema [`$schema`](https://json-schema.org/draft/2020-12/json-schema-core#section-8.1.1) property.

Distinguishes different versions of the MAGIC Administration Metadata content model.

This property value MUST be set to `https://metadata-resources.data.bas.ac.uk/bas-metadata-generator-configuration-schemas/v2/magic-admin-v1.json`.

#### ID

Distinguishes administration metadata instances.

This property MUST relate administration metadata to wider discovery metadata for the described resource.

This property value MUST therefore be set to the `file_identifier` discovery metadata value for the described resource.

#### GitLab issues

Non-public information, history and/or context captured in GitLab issues about the resource.

This property CAN be used with issues from any GitLab instance.

> [!WARNING]
> This property MUST NOT be used for issues from any other systems (such as GitHub) to ensure URLs are in a known format.

#### Metadata permissions

[Access Permissions](#access-permissions) relating to the description of the resource being described.

I.e. Who can view information about the data/service/etc.

SHOULD be used by data discovery systems as a source of truth to configure access permissions.

#### Resource permissions

[Access Permissions](#access-permissions) relating to the resource being described.

I.e. Who can download or access the data/service/etc.

SHOULD be used by data access systems as a source of truth to configure access permissions. 

#### Access permissions

Groups within an identity provider (directory) that can access some information until a specified time, with an 
optional free-text comment explaining why access has been granted.

> [!WARNING]
> The `comments` sub-property MUST NOT be used by any system to configure permissions.

The `directory` and `group` sub-properties MAY use identifiers from an identity provider, or aliases for such 
identifiers where these are mutually understood by different systems.

See [Appendix 2](#appendix-2-minimum-supported-access-permissions) for aliases systems MUST support.

## Encoding specification

### Overview

Administration metadata MUST be:

1. encoded as a JSON string
1. added to a JSON Web Token ([JWT](https://datatracker.ietf.org/doc/html/rfc7519)) using a `pyd` 
  [Private Claim](https://datatracker.ietf.org/doc/html/rfc7519#section-4.3)
1. encrypted using JSON Web Encryption ([JWE](https://datatracker.ietf.org/doc/html/rfc7516))

I.e.:

```
[JWE]
  └── [JWT]
        └── ['pyd'] (private claim)
              └── [Administration Metadata content model instance as JSON string]
```

The outer JWE ensures administration metadata is not accessible to external users (via encryption), whilst the inner 
JWT allows the integrity and trustworthiness of administration information to be verified (via signing).

The JWE MUST be contained in [Discovery Metadata](#discovery-metadata) for the described resource.

### JWT claims

Administration Metadata JWTs MUST contain these claims:

| Claim | Name     | Definition                                                              | Value                                  |
|-------|----------|-------------------------------------------------------------------------|----------------------------------------|
| `pyd` | Payload  | -                                                                       | *JSON encoded administration metadata* |
| `iss` | Issuer   | [RFC 7519](https://datatracker.ietf.org/doc/html/rfc7519#section-4.1.1) | `magic.data.bas.ac.uk`                 |
| `aud` | Audience | [RFC 7519](https://datatracker.ietf.org/doc/html/rfc7519#section-4.1.3) | `data.bas.ac.uk`                       |
| `exp` | Expiry   | [RFC 7519](https://datatracker.ietf.org/doc/html/rfc7519#section-4.1.4) | *100 years from point of issue*        |

> [!NOTE]
> JWTs typically use a short expiry time for prevent long-lived credentials. These tokens are not used for credentials 
> or an identity, and are intentionally long-lived (for the lifetime of the resource).

Administration Metadata JWTs MAY contain these claims:

| Claim | Name       | Definition                                                              | Value                                                  |
|-------|------------|-------------------------------------------------------------------------|--------------------------------------------------------|
| `sub` | Subject    | [RFC 7519](https://datatracker.ietf.org/doc/html/rfc7519#section-4.1.2) | *Related record file identifier and admin metadata ID* |
| `nbf` | Not before | [RFC 7519](https://datatracker.ietf.org/doc/html/rfc7519#section-4.1.5) | *Point of issue*                                       |
| `iat` | Issued at  | [RFC 7519](https://datatracker.ietf.org/doc/html/rfc7519#section-4.1.6) | *Point of issue*                                       |

### JWT signing key

JWTs MUST be signed using the private 
[MAGIC Administration Metadata Signing Key](#appendix-3-magic-administration-metadata-signing-key).

JWTs MUST be verified using the related public key.

### JWE encryption key

JWEs MUST be encrypted using the public key derived from the 
[MAGIC Administration Metadata Encryption Key](#appendix-4-magic-administration-metadata-encryption-key).

JWEs MUST be decrypted using the related private Key.

### Discovery metadata

> [!NOTE]
> This subsection is informative only. It is authoritatively defined by the encoding [JSON Schema](#json-schemas). 

The JWE value MUST be:

- contained in a JSON encoded key-value object under an 'admin_metadata' key
- set as the [Supplemental Information](https://www.datypic.com/sc/niem21/e-gmd_supplementalInformation-1.html) element
- in discovery metadata for the described resource

This discovery metadata MUST also include:

- the file identifier element, using a value that is unique across all records
- a domain consistency data quality element:
  - as per [Appendix 1 - Domain Consistency Element](#appendix-1-domain-consistency-element)
  - stating the record complies with this profile (for validation tools to determine whether a record uses this profile)

I.e.:

```
[Discovery Metadata]
├── [File Identifier]
├── [Identification]
│         └── [Supplemental Information]
│             └── {"admin_metadata": "[JWE]"}
└── [Data Quality]
    └── [Domain Consistency]
```

> [!TIP]
> The supplemental information key-value object MAY contain additional keys as desired.

### Reference implementations

> [!IMPORTANT]
> Pre-publication links for reviewers:
>
> [`get_admin`](https://github.com/antarctica/metadata-library/blob/main/src/bas_metadata_library/standards/magic_administration/v1/utils.py#L122)
> [`set_admin`](https://github.com/antarctica/metadata-library/blob/main/src/bas_metadata_library/standards/magic_administration/v1/utils.py#L141)
> [associated documentation](https://github.com/antarctica/metadata-library/blob/main/docs/usage.md#magic-administration-metadata), 


The [`get_admin`](https://github.com/antarctica/metadata-library/blob/v0.16.0/src/bas_metadata_library/standards/magic_administration/v1/utils.py#L122) 
and [`set_admin`](https://github.com/antarctica/metadata-library/blob/v0.16/src/bas_metadata_library/standards/magic_administration/v1/utils.py#L141) 
methods, and their [associated documentation](https://github.com/antarctica/metadata-library/blob/v0.16.0/docs/usage.md#magic-administration-metadata), 
form a reference Python implementation for encoding and decoding administration metadata using Python.

## Appendices

### Appendix 1 - Domain Consistency Element

```json
{
	"specification": {
		"dates": {
			"publication": "2025-10-22"
		},
		"edition": "1",
		"title": {
			"value": "British Antarctic Survey (BAS) Mapping and Geographic Information Centre (MAGIC) Administration Metadata Profile",
			"href": "https://metadata-standards.data.bas.ac.uk/profiles/magic-administration/v1/"
		},
		"contact": {
			"organisation": {
				"name": "Mapping and Geographic Information Centre, British Antarctic Survey",
				"href": "https://ror.org/01rhff309",
				"title": "ror"
			},
			"phone": "+44 (0)1223 221400",
			"address": {
				"delivery_point": "British Antarctic Survey, High Cross, Madingley Road",
				"city": "Cambridge",
				"administrative_area": "Cambridgeshire",
				"postal_code": "CB3 0ET",
				"country": "United Kingdom"
			},
			"email": "magic@bas.ac.uk",
			"online_resource": {
				"href": "https://www.bas.ac.uk/teams/magic",
				"title": "Mapping and Geographic Information Centre (MAGIC) - BAS public website",
				"description": "General information about the BAS Mapping and Geographic Information Centre (MAGIC) from the British Antarctic Survey (BAS) public website.",
				"function": "information"
			},
			"role": [
				"publisher"
			]
		}
	},
	"explanation": "Resource within scope of the British Antarctic Survey (BAS) Mapping and Geographic Information Centre (MAGIC) Administration Metadata Profile.",
	"result": true
}
```

### Appendix 2 - Minimum supported access permissions

#### Open Access

Grants anyone anywhere access to information (i.e. unrestricted and anonymous access).

Used for information intended for public release or that does not otherwise need to be restricted.

| Property     | Value | Explanation                            |
|--------------|-------|----------------------------------------|
| `directory`  | `*`   | Representing any directory             |
| `group`      | `*`   | Representing any user in any directory |

#### BAS Staff access

[Access Permission](#access-permissions) granting any British Antarctic Survey (BAS) staff member access to 
information, excluding wider UKRI staff.

> [!warning]
> This access permission is underpinned by a dynamic group controlled by UKRI. This group's composition criteria are 
> not known, and it is not guaranteed to exclusively contain BAS staff.

Used for information restricted to within BAS (only).

| Property     | Value        | Explanation                                 |
|--------------|--------------|---------------------------------------------|
| `directory`  | `~nerc`      | Representing the BAS IdP provider directory |
| `group`      | `~bas-staff` | Representing all BAS staff                  |

### Appendix 3 - MAGIC Administration Metadata Signing Key

Public JSON Web Key (JWK):

```json
{
	"kty":"EC",
	"kid":"magic_metadata_signing_key",
	"alg":"ES256",
	"crv":"P-256",
	"x":"Ksei1ZoTIBRQrJZeNRzdch9910T7hqKjRSqq0wkNxRQ",
	"y":"SykdLryiLm3xNHEiC_OYmB6jzaU1ZtyRv8WfxMIRdJ4"
}
```

> [!NOTE]
> Private key material for this key is available by contacting [MAGIC](mailto:magic@bas.ac.uk).

### Appendix 4 - MAGIC Administration Metadata Encryption Key

Public JSON Web Key (JWK):

```json
{
	"kty":"EC",
	"kid":"magic_metadata_encryption_key",
	"alg":"ECDH-ES+A128KW",
	"crv":"P-256",
	"x":"n_SWT2v7lyte0Kgdozc8CO_cJNEjW-s7cRR3plMK_wo",
	"y":"e2TioKjehKX_IgGHZ-Zl0q70jv6cANHWToHWQ507e5U"
}
```

> [!NOTE]
> Private key material for this key is available by contacting [MAGIC](mailto:magic@bas.ac.uk).
